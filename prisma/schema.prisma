generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model Answer {
  id         BigInt   @id @default(autoincrement())
  createdAt  DateTime @default(now())
  updatedAt  DateTime
  text       String
  questionId BigInt
  Question   Question @relation(fields: [questionId], references: [id])

  @@unique([questionId, text])
}

model Attempt {
  id         BigInt   @id @default(autoincrement())
  createdAt  DateTime @default(now())
  text       String
  questionId BigInt
  Question   Question @relation(fields: [questionId], references: [id])
}

model MentalRepresentation {
  id           BigInt   @id @default(autoincrement())
  createdAt    DateTime @default(now())
  updatedAt    DateTime
  name         String
  bodyMarkdown String
  skillId      String
  Skill        Skill    @relation(fields: [skillId], references: [id])
}

model Question {
  id        BigInt    @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime
  text      String    @unique
  skillId   String
  Skill     Skill     @relation(fields: [skillId], references: [id])
  Answer    Answer[]
  Attempt   Attempt[]
}

model Skill {
  id                   String                 @id
  createdAt            DateTime               @default(now())
  updatedAt            DateTime
  name                 String
  description          String
  MentalRepresentation MentalRepresentation[]
  Question             Question[]
  Skill_B              Skill[]                @relation("Prereqs")
  Skill_A              Skill[]                @relation("Prereqs")
}
